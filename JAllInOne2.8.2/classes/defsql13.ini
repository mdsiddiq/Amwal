CREATE TABLE REG06_CURRENCY_CONVS (
  CURRENCY_CODE_REG03 VARCHAR(20) NOT NULL,
  CURRENCY_CODE2_REG03 VARCHAR(20) NOT NULL,
  START_DATE DATETIME NOT NULL,  
  VALUE DECIMAL(18,5) NULL,
  PRIMARY KEY(CURRENCY_CODE_REG03, CURRENCY_CODE2_REG03, START_DATE),
  INDEX REG06_FKIndex1(CURRENCY_CODE_REG03),
  INDEX REG06_FKIndex2(CURRENCY_CODE2_REG03),
  FOREIGN KEY(CURRENCY_CODE_REG03)
    REFERENCES REG03_CURRENCIES(CURRENCY_CODE)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,
  FOREIGN KEY(CURRENCY_CODE2_REG03)
    REFERENCES REG03_CURRENCIES(CURRENCY_CODE)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION
);

INSERT INTO REG06_CURRENCY_CONVS (CURRENCY_CODE_REG03,CURRENCY_CODE2_REG03,START_DATE,VALUE)
SELECT CURRENCY_CODE_REG03,CURRENCY_CODE2_REG03,:DATE,VALUE FROM REG06_CURRENCY_CONV WHERE VALUE IS NOT NULL;

DROP TABLE REG06_CURRENCY_CONV;

ALTER TABLE DOC02_SELLING_ITEMS ADD PRICELIST_CODE_SAL01 VARCHAR(20);
ALTER TABLE DOC02_SELLING_ITEMS ADD PRICELIST_DESCRIPTION VARCHAR(255);

INSERT INTO SYS11_APPLICATION_PARS(PARAM_CODE,VALUE) VALUES('REPORT_PATH','reports');


UPDATE SYS11_APPLICATION_PARS SET VALUE='13' WHERE PARAM_CODE='VERSION';
COMMIT;

UPDATE DOC02_SELLING_ITEMS SET PRICELIST_CODE_SAL01=
(SELECT DOC01_SELLING.PRICELIST_CODE_SAL01 FROM DOC01_SELLING WHERE 
DOC01_SELLING.COMPANY_CODE_SYS01=DOC02_SELLING_ITEMS.COMPANY_CODE_SYS01 AND
DOC01_SELLING.DOC_TYPE=DOC02_SELLING_ITEMS.DOC_TYPE AND
DOC01_SELLING.DOC_YEAR=DOC02_SELLING_ITEMS.DOC_YEAR AND
DOC01_SELLING.DOC_NUMBER=DOC02_SELLING_ITEMS.DOC_NUMBER);

UPDATE DOC02_SELLING_ITEMS SET PRICELIST_DESCRIPTION=
(SELECT DOC01_SELLING.PRICELIST_DESCRIPTION FROM DOC01_SELLING WHERE 
DOC01_SELLING.COMPANY_CODE_SYS01=DOC02_SELLING_ITEMS.COMPANY_CODE_SYS01 AND
DOC01_SELLING.DOC_TYPE=DOC02_SELLING_ITEMS.DOC_TYPE AND
DOC01_SELLING.DOC_YEAR=DOC02_SELLING_ITEMS.DOC_YEAR AND
DOC01_SELLING.DOC_NUMBER=DOC02_SELLING_ITEMS.DOC_NUMBER);

