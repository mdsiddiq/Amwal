ALTER TABLE SYS03_USERS ADD CUSTOMER_PROGRESSIVE_REG04 NUMERIC(12);
ALTER TABLE SYS03_USERS ADD CUSTOMER_CODE_SAL07 VARCHAR(20);

ALTER TABLE REG04_SUBJECTS ADD COMPANY_LOGO VARCHAR(255);

CREATE TABLE ITM31_BRANDS (
  COMPANY_CODE_SYS01 VARCHAR(20) NOT NULL,
  BRAND_CODE VARCHAR(20) NOT NULL,
  DESCRIPTION VARCHAR(255) NOT NULL,
  ENABLED CHAR(1) NULL,
  CREATE_USER VARCHAR(20),
  CREATE_DATE DATETIME,
  LAST_UPDATE_USER VARCHAR(20),
  LAST_UPDATE_DATE DATETIME,   
  PRIMARY KEY(COMPANY_CODE_SYS01, BRAND_CODE),
  INDEX ITM31_FKIndex1(COMPANY_CODE_SYS01)
);

ALTER TABLE ITM01_ITEMS ADD BRAND_CODE_ITM31 VARCHAR(20);

INSERT INTO SYS06_FUNCTIONS(FUNCTION_CODE,PROGRESSIVE_SYS10,IMAGE_NAME,METHOD_NAME,USE_COMPANY_CODE,CAN_DEL)
VALUES('ITM31',3672,'brands.gif','getBrands','Y','N');
INSERT INTO SYS18_FUNCTIONS_LINKS(POS_ORDER,FUNCTION_CODE_SYS06,PROGRESSIVE_HIE03) VALUES(18,'ITM31',22);

INSERT INTO SYS07_ROLE_FUNCTIONS(PROGRESSIVE_SYS04,FUNCTION_CODE_SYS06,CAN_INS,CAN_UPD,CAN_DEL)
 SELECT 2,FUNCTION_CODE,'Y','Y','Y' FROM SYS06_FUNCTIONS
 WHERE NOT EXISTS(SELECT * FROM SYS07_ROLE_FUNCTIONS WHERE SYS07_ROLE_FUNCTIONS.FUNCTION_CODE_SYS06=SYS06_FUNCTIONS.FUNCTION_CODE);

INSERT INTO SYS02_COMPANIES_ACCESS(COMPANY_CODE_SYS01,PROGRESSIVE_SYS04,FUNCTION_CODE_SYS06,CAN_INS,CAN_UPD,CAN_DEL)
 SELECT COMPANY_CODE,2,FUNCTION_CODE_SYS06,'Y','Y','Y' FROM SYS07_ROLE_FUNCTIONS,SYS06_FUNCTIONS,SYS01_COMPANIES
 WHERE FUNCTION_CODE_SYS06=FUNCTION_CODE AND USE_COMPANY_CODE='Y' AND SYS01_COMPANIES.ENABLED='Y' AND
 NOT EXISTS(SELECT * FROM SYS02_COMPANIES_ACCESS WHERE COMPANY_CODE_SYS01=COMPANY_CODE AND FUNCTION_CODE_SYS06=FUNCTION_CODE);


CREATE TABLE ITM32_ITEM_FIELDS (
  COMPANY_CODE_SYS01 VARCHAR(20) NOT NULL,
  PROGRESSIVE_HIE02 NUMERIC(12) NOT NULL,
  FIELD_NAME VARCHAR(255) NOT NULL,
  PROGRESSIVE_SYS10 NUMERIC(12),
  FIELD_TYPE NUMERIC(4) NULL,
  POS NUMERIC(4) NULL,
  SELECTED CHAR(1) NULL,
  CREATE_USER VARCHAR(20),
  CREATE_DATE DATETIME,
  LAST_UPDATE_USER VARCHAR(20),
  LAST_UPDATE_DATE DATETIME,   
  PRIMARY KEY(COMPANY_CODE_SYS01, PROGRESSIVE_HIE02, FIELD_NAME),
  INDEX ITM32_FKIndex1(COMPANY_CODE_SYS01, PROGRESSIVE_HIE02)
);


CREATE TABLE ITM33_VARIANT_IMAGES (
  COMPANY_CODE_SYS01 VARCHAR(20) NOT NULL,
  ITEM_CODE_ITM01 VARCHAR(20) NOT NULL,
  VARIANT_TYPE_ITM06 VARCHAR(20) NOT NULL,
  VARIANT_CODE_ITM11 VARCHAR(20) NOT NULL,
  VARIANT_TYPE_ITM07 VARCHAR(20) NOT NULL,
  VARIANT_CODE_ITM12 VARCHAR(20) NOT NULL,
  VARIANT_TYPE_ITM08 VARCHAR(20) NOT NULL,
  VARIANT_CODE_ITM13 VARCHAR(20) NOT NULL,
  VARIANT_TYPE_ITM09 VARCHAR(20) NOT NULL,
  VARIANT_CODE_ITM14 VARCHAR(20) NOT NULL,
  VARIANT_TYPE_ITM10 VARCHAR(20) NOT NULL,
  VARIANT_CODE_ITM15 VARCHAR(20) NOT NULL,
  SMALL_IMAGE VARCHAR(255) NULL,
  LARGE_IMAGE VARCHAR(255) NULL,
  CREATE_USER VARCHAR(20),
  CREATE_DATE DATETIME,
  LAST_UPDATE_USER VARCHAR(20),
  LAST_UPDATE_DATE DATETIME,  
  PRIMARY KEY(COMPANY_CODE_SYS01, ITEM_CODE_ITM01, VARIANT_TYPE_ITM06, VARIANT_CODE_ITM11, VARIANT_TYPE_ITM07, 
  VARIANT_CODE_ITM12, VARIANT_TYPE_ITM08, VARIANT_CODE_ITM13, VARIANT_TYPE_ITM09, VARIANT_CODE_ITM14, VARIANT_TYPE_ITM10, VARIANT_CODE_ITM15),
  INDEX ITM33_FKIndex1(COMPANY_CODE_SYS01, ITEM_CODE_ITM01, VARIANT_TYPE_ITM06, VARIANT_CODE_ITM11),
  INDEX ITM33_FKIndex2(COMPANY_CODE_SYS01, ITEM_CODE_ITM01, VARIANT_TYPE_ITM07, VARIANT_CODE_ITM12),
  INDEX ITM33_FKIndex3(COMPANY_CODE_SYS01, ITEM_CODE_ITM01, VARIANT_TYPE_ITM08, VARIANT_CODE_ITM13),
  INDEX ITM33_FKIndex4(COMPANY_CODE_SYS01, ITEM_CODE_ITM01, VARIANT_TYPE_ITM09, VARIANT_CODE_ITM14),
  INDEX ITM33_FKIndex5(COMPANY_CODE_SYS01, ITEM_CODE_ITM01, VARIANT_TYPE_ITM10, VARIANT_CODE_ITM15)
);















